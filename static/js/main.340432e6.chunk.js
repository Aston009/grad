(this.webpackJsonprectangle=this.webpackJsonprectangle||[]).push([[0],{18:function(t,e,a){t.exports=a.p+"static/media/plus.cdc95f38.svg"},19:function(t,e,a){t.exports=a.p+"static/media/eye.8a4fc4d1.svg"},29:function(t,e,a){t.exports=a(36)},34:function(t,e,a){},36:function(t,e,a){"use strict";a.r(e);var r=a(0),n=a.n(r),o=a(16),l=a.n(o),i=a(11),c=a(2),d=(a(34),a(17)),s=a.n(d),u=[{color:"#ff6666"},{color:"#ffb366"},{color:"#ffff66"},{color:"#b3ff66"},{color:"#66ff66"},{color:"#66ffd9"},{color:"#66b3ff"},{color:"#8c66ff"},{color:"#ff66ff"},{color:"#ff668c"}],m=function(t){var e=t.onChange,a=t.top,o=t.bottom,l=t.openGradientModal,i=t.gradientDirection,d=Object(r.useState)([]),m=Object(c.a)(d,2),p=m[0],f=m[1],h=Object(r.useState)(["",""]),g=Object(c.a)(h,2),v=g[0],b=g[1];Object(r.useEffect)((function(){f(y(i))}),[a,o,i]);var w=function(t,r,n){var l,i,c=document.getElementById("colors").getBoundingClientRect().y;"top"===t?(l=Math.min(Math.round((r.pageY-c)/50),o-1),e(l<0?0:l,o,n)):(i=Math.max(Math.round((r.pageY-c)/50),a+1),e(a,i>u.length-1?u.length:i,n))},y=function(t){for(var e=[],r=0;r<o;r++)r<a?e.push(""):"center"===t?r-a===0?e.push(2e4):e.push(2e4-(r-a)*Math.floor(2e4/(o-a-1))):r-a===0?e.push(-200):e.push((r-a)*Math.floor(400/(o-a-1))-200);return e},E=s()((function(t,a){if(t&&(0===a&&v[1]||1===a&&v[0])){var r=0===a?t:v[0],n=1===a?t:v[1],o=p.reduce((function(t,e){return Math.abs(e-r)<Math.abs(t-r)?e:t})),l=p.reduce((function(t,e){return Math.abs(e-n)<Math.abs(t-n)?e:t}));e(p.indexOf(o),Math.max(p.indexOf(l),p.indexOf(o)+1),!0)}}),2e3);return n.a.createElement("div",{className:"colors",id:"colors"},n.a.createElement("button",{onClick:l},"\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435"),n.a.createElement("div",{id:"colorsInputs"},n.a.createElement("input",{type:"number",value:v[0],onChange:function(t){b([t.target.value,v[1]]),E(t.target.value,0)}}),n.a.createElement("input",{type:"number",value:v[1],onChange:function(t){b([v[0],t.target.value]),E(t.target.value,1)}}),n.a.createElement("button",{onClick:function(){return b(["",""]),void e(0,10,!0)}},"x")),n.a.createElement("div",{className:"hr top",draggable:"true",onDrag:function(t){return w("top",t)},onDragEnd:function(t){return w("top",t,!0)},style:{top:50*a}}),u.map((function(t,e){return n.a.createElement("div",{className:"color-item",style:{backgroundColor:t.color},id:e,key:e},n.a.createElement("span",null,p[e]))})),n.a.createElement("div",{className:"hr bottom",draggable:"true",onDrag:function(t){return w("bottom",t)},onDragEnd:function(t){return w("bottom",t,!0)},style:{top:50*o}}))},p=function(t){var e=t.onClose,a=t.onSubmit,r=t.header,o=t.form;return n.a.createElement("div",{className:"modal"},n.a.createElement("button",{onClick:e,className:"close"},"\xd7"),n.a.createElement("form",null,n.a.createElement("h2",null,r,":"),o,n.a.createElement("button",{onClick:function(t){a(t),e()},type:"button",className:"submit"},"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c")))},f=a(18),h=a.n(f),g=a(19),v=a.n(g),b=a(20),w=a(1),y=function(t,e,a){var r;if("bottom-right"===e?r=t.append("linearGradient").attr("id","gradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","100%"):"bottom-left"===e?r=t.append("linearGradient").attr("id","gradient").attr("x1","100%").attr("y1","0%").attr("x2","0%").attr("y2","100%"):"top-right"===e?r=t.append("linearGradient").attr("id","gradient").attr("x1","0%").attr("y1","100%").attr("x2","100%").attr("y2","0%"):"top-left"===e?r=t.append("linearGradient").attr("id","gradient").attr("x1","100%").attr("y1","100%").attr("x2","0%").attr("y2","0%"):"center"===e&&(r=t.append("radialGradient").attr("id","gradient").attr("r","0.73")),"center"===e){a.reverse().forEach((function(t,e){return r.append("stop").attr("offset",24+76/a.length*(e+1)+"%").attr("stop-color",t.color).attr("stop-opacity",1)}))}else a.reverse().forEach((function(t,e){return r.append("stop").attr("offset",100/a.length*(e+1)+"%").attr("stop-color",t.color).attr("stop-opacity",1)}))},E=function(t,e,a,r,n,o,l){w.f(".rect").empty()||localStorage.setItem("prevZoom",JSON.stringify(window.prevZoom||{}));var i=JSON.parse(localStorage.getItem("prevZoom")||"{}"),c=a/(window.prevZoom&&window.prevZoom.transform.k||i.transform&&i.transform.k||1),d=r/(window.prevZoom&&window.prevZoom.transform.k||i.transform&&i.transform.k||1);localStorage.setItem("rectParams",JSON.stringify([t,e,a,r,n,o])),w.f("#clipGradient").html("").append("rect").attr("x",c).attr("y",d).attr("width",n).attr("height",o),w.f("#rectsG").html("").append("g").attr("id",l).attr("class","rect");var s=w.f("#".concat(l)).append("g").attr("id","mainG");s.append("rect").attr("x",c).attr("y",d).attr("width",n).attr("height",o).attr("stroke-width",2).attr("stroke","black").attr("fill","none");for(var u=n/t,m=[],p=u;Math.round(p)<Math.round(n);p+=u)m.push(p),s.append("line").attr("x1",p+c).attr("y1",0+d).attr("x2",p+c).attr("y2",o+d).attr("stroke-width",2).attr("stroke","black");m.push(n);for(var f=o/e,h=[],g=f;Math.round(g)<Math.round(o);g+=f)h.push(g),s.append("line").attr("x1",0+c).attr("y1",g+d).attr("x2",n+c).attr("y2",g+d).attr("stroke-width",2).attr("stroke","black");h.push(o);for(var v=[[0,0,0,0]],b=0;b<m.length+h.length-1;b++){var y=void 0,E=void 0,k=void 0,x=void 0;b<=m.length-1?(y=m[b],k=0):(y=n,k=(b-m.length+1)*f),b<=h.length-1?(x=h[b],E=0):(x=o,E=(b-h.length+1)*u),v.push([y,k,E,x]),s.append("line").attr("x1",y+c).attr("y1",k+d).attr("x2",E+c).attr("y2",x+d).attr("stroke-width",2).attr("stroke","black")}for(var O=0;O<m.length+h.length-1;O++){var j=void 0,S=void 0,C=void 0,G=void 0;O<m.length-1?(j=m[O],C=0):(j=n,C=(O-m.length+1)*f),O<=h.length-1?(G=h[O],S=0):(G=o,S=(O-h.length+1)*u),s.append("line").attr("x1",j+c).attr("y1",C+d).attr("x2",S+c).attr("y2",G+d).attr("stroke-width",2).attr("stroke","black")}for(var Z=0;Z<m.length+h.length;Z++){var M=void 0,N=void 0,D=void 0,I=void 0;Z<m.length-1?(M=m[m.length-2-Z],D=0):(M=0,D=(Z-m.length+1)*f),Z<=h.length-1?(I=h[Z],N=n):(I=o,N=n-(Z-h.length+1)*u),s.append("line").attr("x1",M+c).attr("y1",D+d).attr("x2",N+c).attr("y2",I+d).attr("stroke-width",2).attr("stroke","black")}},k=function(t){for(var e="",a=String(t),r=a.length-1;r>=0;r--)e=((a.length-r)%3===0?" ":"")+a[r]+e;return e},x=function(t,e){var a=w.g("#gradientG defs");a.select("#gradient").remove(),y(a,e,t)};var O=function(){var t=Object(r.useState)([0,u.length]),e=Object(c.a)(t,2),a=e[0],o=e[1],l=Object(r.useState)(!1),d=Object(c.a)(l,2),s=d[0],f=d[1],g=Object(r.useState)(!0),O=Object(c.a)(g,2),j=O[0],S=O[1],C=Object(r.useState)(!1),G=Object(c.a)(C,2),Z=G[0],M=G[1],N=Object(r.useState)([0,0]),D=Object(c.a)(N,2),I=D[0],B=D[1],z=Object(r.useState)("bottom-right"),F=Object(c.a)(z,2),J=F[0],P=F[1],R=Object(r.useState)(!1),Y=Object(c.a)(R,2),W=Y[0],X=Y[1],H=Object(r.useState)(null),$=Object(c.a)(H,2),q=$[0],A=$[1];return Object(r.useEffect)((function(){var t=function(t,e){var a=document.getElementById("canvas").getBoundingClientRect(),r=0,n=0,o=30,l=40,i=a.width-l-n,c=a.height+10-r-o,d=w.f("#canvas").append("svg").attr("width",i+l+n).attr("height",c+r+o).append("g").attr("transform","translate("+l+","+r+")"),s=w.e().range([c,0]).domain([0,100*c/i]),u=w.e().range([0,i]).domain([0,100]),m=w.b(s).tickSize(-a.width).ticks(5).tickFormat(k),p=d.append("g").call(m),f=w.a(u).tickSize(-a.height).ticks(10).tickFormat(k),h=d.append("g").attr("transform","translate(0, ".concat(c,")")).call(f);d.append("text").text("Y").attr("x",0-l).attr("y",c/2),d.append("text").text("X").attr("x",i/2).attr("y",c+o).style("text-anchor","middle");var g=w.f("#canvas").append("svg").attr("id","rects").attr("clip-path","url(#clip)"),v=g.append("g").attr("id","gradientG").attr("clip-path","url(#clipGradient)");v.append("rect").attr("width",2*i).attr("height",2*i).attr("x",41-i).attr("y",-i+c).attr("fill","url(#gradient)");var E=v.append("defs");E.append("clipPath").attr("id","clipGradient"),y(E,e,t),g.append("defs").append("clipPath").attr("transform","translate(40, 0)").attr("id","clip").append("rect").attr("width",i).attr("height",c),g.append("g").attr("id","rectsG");var x=w.h().scaleExtent([.5,1]).translateExtent([[-i,-i+c],[i+40,i+c+20]]).on("zoom",(function(){w.f("#rectsG").attr("transform",w.d.transform),w.f("#gradientG").attr("transform",w.d.transform),h.call(f.scale(w.d.transform.rescaleX(u))),p.call(m.scale(w.d.transform.rescaleY(s))),window.prevZoom=Object(b.a)({},w.d)}));return w.f("#rects").call(x),[u,s]}(u.slice(a[0],a[1]),J);A(t);var e="rect"+Date.now(),r=JSON.parse(localStorage.getItem("rectParams")||"[]");if(r.length)E.apply(void 0,Object(i.a)(r).concat([e]));else{var n=document.getElementById("canvas").getBoundingClientRect(),o=t[0].invert(window.innerWidth/2-150)*((n.width-40)/100)-47-(window.prevZoom&&window.prevZoom.transform.x||0),l=n.height-t[1].invert(window.innerHeight/2-150)*((n.width-40)/100)-60-(window.prevZoom&&window.prevZoom.transform.y||0);X(!1),E(3,3,o,l,300,300,e)}}),[]),Object(r.useEffect)((function(){if(q&&q.length){var t=document.getElementById("canvas").getBoundingClientRect(),e=w.c().on("end",(function(){var e=q[0].invert(w.d.subject.x)*((t.width-40)/100)-47-(window.prevZoom&&window.prevZoom.transform.x||0),a=t.height-q[1].invert(w.d.subject.y)*((t.width-40)/100)-60-(window.prevZoom&&window.prevZoom.transform.y||0),r="rect"+Date.now();X(!1),E.apply(void 0,Object(i.a)(I).concat([e,a,(w.d.x-w.d.subject.x)/(window.prevZoom&&window.prevZoom.transform.k||1),(w.d.y-w.d.subject.y)/(window.prevZoom&&window.prevZoom.transform.k||1),r]))}));w.f("#overlay").call(e)}}),[q,I,J]),Object(r.useEffect)((function(){j?(w.g("#rectsG line").attr("stroke-width",2),w.g("#rectsG rect").attr("stroke-width",2)):(console.log("hide"),w.g("#rectsG line").attr("stroke-width",0),w.g("#rectsG rect").attr("stroke-width",0))}),[j]),n.a.createElement("main",null,n.a.createElement("button",{onClick:function(){return f(!0)},className:"edit"},n.a.createElement("img",{src:h.a,alt:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})),n.a.createElement("button",{onClick:function(){return S((function(t){return!t}))},className:"hide"},n.a.createElement("img",{src:v.a,alt:"\u0421\u043f\u0440\u044f\u0442\u0430\u0442\u044c \u043b\u0438\u043d\u0438\u0438"})),s&&n.a.createElement(p,{onClose:function(){return f(!1)},onSubmit:function(t){t.preventDefault(),X(!0);var e=new FormData(t.target.parentNode);B([parseInt(e.get("horizontal")),parseInt(e.get("vertical"))])},header:"\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a\u043e\u0432",form:n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"horizontal"},"\u041f\u043e \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438"),n.a.createElement("input",{type:"number",placeholder:"2",id:"horizontal",min:"1",name:"horizontal"})),n.a.createElement("li",null,n.a.createElement("label",{htmlFor:"vertical"},"\u041f\u043e \u0432\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438"),n.a.createElement("input",{type:"number",placeholder:"2",id:"vertical",min:"1",name:"vertical"})))}),Z&&n.a.createElement(p,{onClose:function(){return M(!1)},onSubmit:function(t){t.preventDefault();var e=new FormData(t.target.parentNode);P(e.get("direction")),x(u.slice(a[0],a[1]),e.get("direction"))},header:"\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0433\u0440\u0430\u0434\u0435\u043d\u0442\u0430",form:n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("input",{type:"radio",id:"bottom-right",name:"direction",value:"bottom-right",defaultChecked:"bottom-right"===J}),n.a.createElement("label",{for:"huey"},"-x+y")),n.a.createElement("li",null,n.a.createElement("input",{type:"radio",id:"top-right",name:"direction",value:"top-right",defaultChecked:"top-right"===J}),n.a.createElement("label",{for:"huey"},"-x-y")),n.a.createElement("li",null,n.a.createElement("input",{type:"radio",id:"top-left",name:"direction",value:"top-left",defaultChecked:"top-left"===J}),n.a.createElement("label",{for:"huey"},"x-y")),n.a.createElement("li",null,n.a.createElement("input",{type:"radio",id:"bottom-left",name:"direction",value:"bottom-left",defaultChecked:"bottom-left"===J}),n.a.createElement("label",{for:"huey"},"x+y")),n.a.createElement("li",null,n.a.createElement("input",{type:"radio",id:"center",name:"direction",value:"center",defaultChecked:"center"===J}),n.a.createElement("label",{for:"huey"},"x",n.a.createElement("sup",null,"2"),"+y",n.a.createElement("sup",null,"2"))))}),n.a.createElement("div",{className:"wrapper"},n.a.createElement("div",{id:"overlay",style:{display:W?"block":"none"}}),n.a.createElement("div",{className:"canvas",id:"canvas"})),n.a.createElement(m,{onChange:function(t,e){o([t,e]),x(u.slice(t,e),J)},top:a[0],bottom:a[1],openGradientModal:function(){return M(!0)},gradientDirection:J}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.340432e6.chunk.js.map