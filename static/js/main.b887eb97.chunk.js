(this.webpackJsonprectangle=this.webpackJsonprectangle||[]).push([[0],{13:function(e,_,t){"use strict";var a=t(0),r=t.n(a);_.a=function(e){var _=e.onClose,t=e.onSubmit,a=e.header,n=e.form;return r.a.createElement("div",{className:"modal"},r.a.createElement("button",{onClick:_,className:"close"},"\xd7"),r.a.createElement("form",null,r.a.createElement("h2",null,a,":"),n,r.a.createElement("button",{onClick:function(e){t(e),_()},type:"button",className:"submit"},"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c")))}},20:function(module,__webpack_exports__,__webpack_require__){"use strict";var C_Users_Acer_pc_Desktop_Rectangle_final_WithoutServer_client_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(14),C_Users_Acer_pc_Desktop_Rectangle_final_WithoutServer_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__),_styles_css__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(39),_styles_css__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_styles_css__WEBPACK_IMPORTED_MODULE_3__),_components_Colors__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(21),_components_Modal__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(13),_imgs_plus_svg__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(23),_imgs_plus_svg__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_imgs_plus_svg__WEBPACK_IMPORTED_MODULE_6__),_imgs_eye_svg__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(24),_imgs_eye_svg__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_imgs_eye_svg__WEBPACK_IMPORTED_MODULE_7__),_d3__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(6),d3__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(1),_config__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(3);function App(){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)([0,_config__WEBPACK_IMPORTED_MODULE_10__.a.length]),_useState2=Object(C_Users_Acer_pc_Desktop_Rectangle_final_WithoutServer_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState,2),colors=_useState2[0],setColors=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),_useState4=Object(C_Users_Acer_pc_Desktop_Rectangle_final_WithoutServer_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState3,2),isRectsModalOpen=_useState4[0],setIsRectsModalOpen=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(!0),_useState6=Object(C_Users_Acer_pc_Desktop_Rectangle_final_WithoutServer_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState5,2),isLinesShows=_useState6[0],setIsLinesShows=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),_useState8=Object(C_Users_Acer_pc_Desktop_Rectangle_final_WithoutServer_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState7,2),isGradientModalOpen=_useState8[0],setIsGradientModalOpen=_useState8[1],_useState9=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)([0,0]),_useState10=Object(C_Users_Acer_pc_Desktop_Rectangle_final_WithoutServer_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState9,2),countRects=_useState10[0],setCountRects=_useState10[1],_useState11=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)("bottom-right"),_useState12=Object(C_Users_Acer_pc_Desktop_Rectangle_final_WithoutServer_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState11,2),gradientDirection=_useState12[0],setGradientDirection=_useState12[1],_useState13=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),_useState14=Object(C_Users_Acer_pc_Desktop_Rectangle_final_WithoutServer_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState13,2),isOverlayOpen=_useState14[0],setIsOverlayOpen=_useState14[1],_useState15=Object(react__WEBPACK_IMPORTED_MODULE_2__.useState)(null),_useState16=Object(C_Users_Acer_pc_Desktop_Rectangle_final_WithoutServer_client_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__.a)(_useState15,2),scales=_useState16[0],setScales=_useState16[1],colorsChange=function(e,_){setColors([e,_]),Object(_d3__WEBPACK_IMPORTED_MODULE_8__.a)(_config__WEBPACK_IMPORTED_MODULE_10__.a.slice(e,_),gradientDirection)},onRectsSubmit=function(e){e.preventDefault(),setIsOverlayOpen(!0);var _=new FormData(e.target.parentNode);setCountRects([parseInt(_.get("horizontal")),parseInt(_.get("vertical"))])},onGradientDirectionSubmit=function(e){e.preventDefault();var _=new FormData(e.target.parentNode);setGradientDirection(_.get("direction")),Object(_d3__WEBPACK_IMPORTED_MODULE_8__.a)(_config__WEBPACK_IMPORTED_MODULE_10__.a.slice(colors[0],colors[1]),_.get("direction"))};return Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){var scales=Object(_d3__WEBPACK_IMPORTED_MODULE_8__.b)(_config__WEBPACK_IMPORTED_MODULE_10__.a.slice(colors[0],colors[1]),gradientDirection);setScales(scales),fetch("",{method:"POST",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(res){eval(res);var id="rect"+Date.now(),rectParams=JSON.parse(localStorage.getItem("rectParams")||"[]");if(rectParams.length){var _window;(_window=window).draw.apply(_window,Object(C_Users_Acer_pc_Desktop_Rectangle_final_WithoutServer_client_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(rectParams).concat([id]))}else{var canvasSizes=document.getElementById("canvas").getBoundingClientRect(),x1=scales[0].invert(window.innerWidth/2-150)*((canvasSizes.width-40)/100)-47-(window.prevZoom&&window.prevZoom.transform.x||0),y1=canvasSizes.height-scales[1].invert(window.innerHeight/2-150)*((canvasSizes.width-40)/100)-60-(window.prevZoom&&window.prevZoom.transform.y||0);setIsOverlayOpen(!1),window.draw(3,3,x1,y1,300,300,id)}})).catch((function(e){return console.error(e)}))}),[]),Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){if(scales&&scales.length){var e=document.getElementById("canvas").getBoundingClientRect(),_=d3__WEBPACK_IMPORTED_MODULE_9__.c().on("end",(function(){var _,t=scales[0].invert(d3__WEBPACK_IMPORTED_MODULE_9__.d.subject.x)*((e.width-40)/100)-47-(window.prevZoom&&window.prevZoom.transform.x||0),a=e.height-scales[1].invert(d3__WEBPACK_IMPORTED_MODULE_9__.d.subject.y)*((e.width-40)/100)-60-(window.prevZoom&&window.prevZoom.transform.y||0),r="rect"+Date.now();setIsOverlayOpen(!1),(_=window).draw.apply(_,Object(C_Users_Acer_pc_Desktop_Rectangle_final_WithoutServer_client_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(countRects).concat([t,a,(d3__WEBPACK_IMPORTED_MODULE_9__.d.x-d3__WEBPACK_IMPORTED_MODULE_9__.d.subject.x)/(window.prevZoom&&window.prevZoom.transform.k||1),(d3__WEBPACK_IMPORTED_MODULE_9__.d.y-d3__WEBPACK_IMPORTED_MODULE_9__.d.subject.y)/(window.prevZoom&&window.prevZoom.transform.k||1),r]))}));d3__WEBPACK_IMPORTED_MODULE_9__.f("#overlay").call(_)}}),[scales,countRects,gradientDirection]),Object(react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){isLinesShows?Object(_d3__WEBPACK_IMPORTED_MODULE_8__.d)():Object(_d3__WEBPACK_IMPORTED_MODULE_8__.c)()}),[isLinesShows]),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("main",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("button",{onClick:function(){return setIsRectsModalOpen(!0)},className:"edit"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("img",{src:_imgs_plus_svg__WEBPACK_IMPORTED_MODULE_6___default.a,alt:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("button",{onClick:function(){return setIsLinesShows((function(e){return!e}))},className:"hide"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("img",{src:_imgs_eye_svg__WEBPACK_IMPORTED_MODULE_7___default.a,alt:"\u0421\u043f\u0440\u044f\u0442\u0430\u0442\u044c \u043b\u0438\u043d\u0438\u0438"})),isRectsModalOpen&&react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_components_Modal__WEBPACK_IMPORTED_MODULE_5__.a,{onClose:function(){return setIsRectsModalOpen(!1)},onSubmit:onRectsSubmit,header:"\u041f\u0440\u044f\u043c\u043e\u0443\u0433\u043e\u043b\u044c\u043d\u0438\u043a\u043e\u0432",form:react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("ul",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("label",{htmlFor:"horizontal"},"\u041f\u043e \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438"),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("input",{type:"number",placeholder:"2",id:"horizontal",min:"1",name:"horizontal"})),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("label",{htmlFor:"vertical"},"\u041f\u043e \u0432\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438"),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("input",{type:"number",placeholder:"2",id:"vertical",min:"1",name:"vertical"})))}),isGradientModalOpen&&react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_components_Modal__WEBPACK_IMPORTED_MODULE_5__.a,{onClose:function(){return setIsGradientModalOpen(!1)},onSubmit:onGradientDirectionSubmit,header:"\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0433\u0440\u0430\u0434\u0435\u043d\u0442\u0430",form:react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("ul",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("input",{type:"radio",id:"bottom-right",name:"direction",value:"bottom-right",defaultChecked:"bottom-right"===gradientDirection}),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("label",{for:"huey"},"-x+y")),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("input",{type:"radio",id:"top-right",name:"direction",value:"top-right",defaultChecked:"top-right"===gradientDirection}),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("label",{for:"huey"},"-x-y")),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("input",{type:"radio",id:"top-left",name:"direction",value:"top-left",defaultChecked:"top-left"===gradientDirection}),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("label",{for:"huey"},"x-y")),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("input",{type:"radio",id:"bottom-left",name:"direction",value:"bottom-left",defaultChecked:"bottom-left"===gradientDirection}),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("label",{for:"huey"},"x+y")),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("li",null,react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("input",{type:"radio",id:"center",name:"direction",value:"center",defaultChecked:"center"===gradientDirection}),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("label",{for:"huey"},"x",react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("sup",null,"2"),"+y",react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("sup",null,"2"))))}),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{className:"wrapper"},react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{id:"overlay",style:{display:isOverlayOpen?"block":"none"}}),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement("div",{className:"canvas",id:"canvas"})),react__WEBPACK_IMPORTED_MODULE_2___default.a.createElement(_components_Colors__WEBPACK_IMPORTED_MODULE_4__.a,{onChange:colorsChange,top:colors[0],bottom:colors[1],openGradientModal:function(){return setIsGradientModalOpen(!0)},gradientDirection:gradientDirection}))}__webpack_exports__.a=App},21:function(e,_,t){"use strict";var a=t(2),r=t(0),n=t.n(r),o=t(22),c=t.n(o),l=t(3);_.a=function(e){var _=e.onChange,t=e.top,o=e.bottom,i=e.openGradientModal,s=e.gradientDirection,E=Object(r.useState)([]),u=Object(a.a)(E,2),d=u[0],O=u[1],D=Object(r.useState)(["",""]),p=Object(a.a)(D,2),m=p[0],M=p[1];Object(r.useEffect)((function(){O(P(s))}),[t,o,s]);var f=function(e,a,r){var n,c,i=document.getElementById("colors").getBoundingClientRect().y;"top"===e?(n=Math.min(Math.round((a.pageY-i)/50),o-1),_(n<0?0:n,o,r)):(c=Math.max(Math.round((a.pageY-i)/50),t+1),_(t,c>l.a.length-1?l.a.length:c,r))},P=function(e){for(var _=[],a=0;a<o;a++)a<t?_.push(""):"center"===e?a-t===0?_.push(2e4):_.push(2e4-(a-t)*Math.floor(2e4/(o-t-1))):a-t===0?_.push(-200):_.push((a-t)*Math.floor(400/(o-t-1))-200);return _},g=c()((function(e,a){var r=d.reduce((function(_,t){return Math.abs(t-e)<Math.abs(_-e)?t:_}));0===a?_(d.indexOf(r),o,!0):_(t,d.indexOf(r),!0)}),2e3);return n.a.createElement("div",{className:"colors",id:"colors"},n.a.createElement("button",{onClick:i},"\u041d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435"),n.a.createElement("div",{id:"colorsInputs"},n.a.createElement("input",{type:"number",value:m[0],onChange:function(e){M([e.target.value,m[1]]),g(e.target.value,0)}}),n.a.createElement("input",{type:"number",value:m[1],onChange:function(e){M([m[0],e.target.value]),g(e.target.value,1)}}),n.a.createElement("button",{onClick:function(){return M(["",""]),void _(0,10,!0)}},"x")),n.a.createElement("div",{className:"hr top",draggable:"true",onDrag:function(e){return f("top",e)},onDragEnd:function(e){return f("top",e,!0)},style:{top:50*t}}),l.a.map((function(e,_){return n.a.createElement("div",{className:"color-item",style:{backgroundColor:e.color},id:_,key:_},n.a.createElement("span",null,d[_]))})),n.a.createElement("div",{className:"hr bottom",draggable:"true",onDrag:function(e){return f("bottom",e)},onDragEnd:function(e){return f("bottom",e,!0)},style:{top:50*o}}))}},23:function(e,_,t){e.exports=t.p+"static/media/plus.cdc95f38.svg"},24:function(e,_,t){e.exports=t.p+"static/media/eye.8a4fc4d1.svg"},3:function(e,_,t){"use strict";t.d(_,"a",(function(){return a}));var a=[{color:"#ff6364"},{color:"#ffa868"},{color:"#ffe672"},{color:"#d3ff84"},{color:"#96ff96"},{color:"#96ffd4"},{color:"#8ef3ff"},{color:"#7dd1ff"},{color:"#6999ff"},{color:"#5455ff"}]},34:function(e,_,t){e.exports=t(41)},39:function(e,_,t){},41:function(e,_,t){"use strict";t.r(_);var a=t(0),r=t.n(a),n=t(19),o=t.n(n),c=t(20);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(c.a,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,_,t){"use strict";t.d(_,"b",(function(){return c})),t.d(_,"a",(function(){return l})),t.d(_,"c",(function(){return i})),t.d(_,"d",(function(){return s}));var a=t(25),r=t(1),n=function(e,_,t){var a;"bottom-right"===_?a=e.append("linearGradient").attr("id","gradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","100%"):"bottom-left"===_?a=e.append("linearGradient").attr("id","gradient").attr("x1","100%").attr("y1","0%").attr("x2","0%").attr("y2","100%"):"top-right"===_?a=e.append("linearGradient").attr("id","gradient").attr("x1","0%").attr("y1","100%").attr("x2","100%").attr("y2","0%"):"top-left"===_?a=e.append("linearGradient").attr("id","gradient").attr("x1","100%").attr("y1","100%").attr("x2","0%").attr("y2","0%"):"center"===_&&(a=e.append("radialGradient").attr("id","gradient")),t.reverse().forEach((function(e,_){return a.append("stop").attr("offset",100/t.length*(_+1)+"%").attr("stop-color",e.color).attr("stop-opacity",1)}))},o=function(e){for(var _="",t=String(e),a=t.length-1;a>=0;a--)_=((t.length-a)%3===0?" ":"")+t[a]+_;return _},c=function(e,_){var t=document.getElementById("canvas").getBoundingClientRect(),c=0,l=0,i=30,s=40,E=t.width-s-l,u=t.height+10-c-i,d=r.f("#canvas").append("svg").attr("width",E+s+l).attr("height",u+c+i).append("g").attr("transform","translate("+s+","+c+")"),O=r.e().range([u,0]).domain([0,100*u/E]),D=r.e().range([0,E]).domain([0,100]),p=r.b(O).tickSize(-t.width).ticks(5).tickFormat(o),m=d.append("g").call(p),M=r.a(D).tickSize(-t.height).ticks(10).tickFormat(o),f=d.append("g").attr("transform","translate(0, ".concat(u,")")).call(M);d.append("text").text("Y").attr("x",0-s).attr("y",u/2),d.append("text").text("X").attr("x",E/2).attr("y",u+i).style("text-anchor","middle");var P=r.f("#canvas").append("svg").attr("id","rects").attr("clip-path","url(#clip)"),g=P.append("g").attr("id","gradientG").attr("clip-path","url(#clipGradient)");g.append("rect").attr("width",2*E).attr("height",2*E).attr("x",41-E).attr("y",-E+u).attr("fill","url(#gradient)");var C=g.append("defs");C.append("clipPath").attr("id","clipGradient"),n(C,_,e),P.append("defs").append("clipPath").attr("transform","translate(40, 0)").attr("id","clip").append("rect").attr("width",E).attr("height",u),P.append("g").attr("id","rectsG");var h=r.h().scaleExtent([.5,1]).translateExtent([[-E,-E+u],[E+40,E+u+20]]).on("zoom",(function(){r.f("#rectsG").attr("transform",r.d.transform),r.f("#gradientG").attr("transform",r.d.transform),f.call(M.scale(r.d.transform.rescaleX(D))),m.call(p.scale(r.d.transform.rescaleY(O))),window.prevZoom=Object(a.a)({},r.d)}));return r.f("#rects").call(h),[D,O]},l=function(e,_){var t=r.g("#gradientG defs");t.select("#gradient").remove(),n(t,_,e)},i=function(){console.log("hide"),r.g("#rectsG line").attr("stroke-width",0),r.g("#rectsG rect").attr("stroke-width",0)},s=function(){r.g("#rectsG line").attr("stroke-width",2),r.g("#rectsG rect").attr("stroke-width",2)}}},[[34,1,2]]]);
//# sourceMappingURL=main.b887eb97.chunk.js.map